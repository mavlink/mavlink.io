<!DOCTYPE HTML><html lang="ko"><head><meta charset="UTF-8"><meta content="text/html; charset=utf-8"http-equiv="Content-Type"><title>매개변수 프로토콜 · MAVLink Developer Guide</title><meta content="IE=edge"http-equiv="X-UA-Compatible"/><meta content=""name="description"><meta content="GitBook 3.2.3"name="generator"><link href="../../gitbook/style.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-anchors/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-language-picker/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-richquotes/plugin.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-highlight/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-search/search.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-fontsettings/website.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-api/theme-api.css"rel="stylesheet"><link href="../../gitbook/gitbook-plugin-theme-dronecode/theme_styles.css"rel="stylesheet"><meta content="true"name="HandheldFriendly"/><meta content="width=device-width,initial-scale=1,user-scalable=no"name="viewport"><meta content="yes"name="apple-mobile-web-app-capable"><meta content="black"name="apple-mobile-web-app-status-bar-style"><link href="../../gitbook/images/apple-touch-icon-precomposed-152.png"rel="apple-touch-icon-precomposed"sizes="152x152"><link href="../../gitbook/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="parameter_ext.html"rel="next"/><link href="mission.html"rel="prev"/></head><body><div id="common_dronecode_menu"><div class="large_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (large)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="small_version common_menu_logo"><a href="https://mavlink.io/en/"><img alt="Dronecode logo (small)"src="../../assets/site/logo_mavlink_header.png"/></a></div><div class="common_menu_options"><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/messages/common.html">Messages</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/faq.html">FAQ</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/implementations.html">Implementations</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/mavgen_c/examples.html">Examples</a></div><div class="common_dronecode_menu_item large_version"><a href="https://mavlink.io/en/about/support.html">Support</a></div><div class="common_dronecode_menu_item small_version"><a href="https://mavlink.io/en/about/support.html">Help</a></div></div></div><div class="book"><div class="book-summary"><div id="book-search-input"role="search"><input placeholder="검색어 입력"type="text"/></div><nav role="navigation"><ul class="summary"><li class="chapter"data-level="1.1"data-path="../"><a href="../">소개</a><ul class="articles"><li class="chapter"data-level="1.1.1"data-path="../about/overview.html"><a href="../about/overview.html">개요</a></li><li class="chapter"data-level="1.1.2"data-path="../about/faq.html"><a href="../about/faq.html">자주 묻는 질문</a></li><li class="chapter"data-level="1.1.3"data-path="../about/implementations.html"><a href="../about/implementations.html">구현</a></li></ul></li><li class="chapter"data-level="1.2"data-path="../getting_started/"><a href="../getting_started/">시작하기</a><ul class="articles"><li class="chapter"data-level="1.2.1"data-path="../getting_started/installation.html"><a href="../getting_started/installation.html">MAVLink 설치하기</a></li><li class="chapter"data-level="1.2.2"data-path="../getting_started/generate_libraries.html"><a href="../getting_started/generate_libraries.html">MAVLink 라이브러리 생성하기</a></li><li class="chapter"data-level="1.2.3"data-path="../getting_started/ros.html"><a href="../getting_started/ros.html">ROS용 소스 코드 파일 생성하기</a></li></ul></li><li class="chapter"data-level="1.3"data-path="../getting_started/use_libraries.html"><a href="../getting_started/use_libraries.html">MAVLink 라이브러리 사용법</a><ul class="articles"><li class="chapter"data-level="1.3.1"data-path="../mavgen_c/"><a href="../mavgen_c/">C (mavgen)</a><ul class="articles"><li class="chapter"data-level="1.3.1.1"data-path="../mavgen_c/message_signing_c.html"><a href="../mavgen_c/message_signing_c.html">메세지 서명</a></li><li class="chapter"data-level="1.3.1.2"data-path="../mavgen_c/examples.html"><a href="../mavgen_c/examples.html">예제</a><ul class="articles"><li class="chapter"data-level="1.3.1.2.1"data-path="../mavgen_c/example_c_uart.html"><a href="../mavgen_c/example_c_uart.html">UART 인터페이스 (C)</a></li><li class="chapter"data-level="1.3.1.2.2"data-path="../mavgen_c/example_c_udp.html"><a href="../mavgen_c/example_c_udp.html">UDP 예시 (C)</a></li></ul></li></ul></li><li class="chapter"data-level="1.3.2"data-path="../mavgen_python/"><a href="../mavgen_python/">Python (mavgen)</a></li></ul></li><li class="chapter"data-level="1.4"data-path="../guide/"><a href="../guide/">안내서</a><ul class="articles"><li class="chapter"data-level="1.4.1"data-path="../guide/mavlink_version.html"><a href="../guide/mavlink_version.html">MAVLink 버전</a></li><li class="chapter"data-level="1.4.2"data-path="../guide/mavlink_2.html"><a href="../guide/mavlink_2.html">MAVLink 2</a></li><li class="chapter"data-level="1.4.3"data-path="../guide/message_signing.html"><a href="../guide/message_signing.html">메세지 서명</a></li><li class="chapter"data-level="1.4.4"data-path="../guide/serialization.html"><a href="../guide/serialization.html">직렬화</a></li><li class="chapter"data-level="1.4.5"data-path="../guide/routing.html"><a href="../guide/routing.html">라우팅</a></li><li class="chapter"data-level="1.4.6"data-path="../guide/general_telemetry.html"><a href="../guide/general_telemetry.html">범용 텔레메트리</a></li><li class="chapter"data-level="1.4.7"data-path="../guide/offboard_control.html"><a href="../guide/offboard_control.html">보드 외부 요소 제어</a></li><li class="chapter"data-level="1.4.8"data-path="../file_formats/"><a href="../file_formats/">파일 형식</a></li><li class="chapter"data-level="1.4.9"data-path="../guide/uavcan_interaction.html"><a href="../guide/uavcan_interaction.html">UAVCAN 통신</a></li><li class="chapter"data-level="1.4.10"data-path="../guide/scripts.html"><a href="../guide/scripts.html">스크립트</a></li><li class="chapter"data-level="1.4.11"data-path="../guide/xml_schema.html"><a href="../guide/xml_schema.html">MAVLink XML 스키마</a></li><li class="chapter"data-level="1.4.12"data-path="../guide/define_xml_element.html"><a href="../guide/define_xml_element.html">XML 기수/메세지 정의</a></li><li class="chapter"data-level="1.4.13"data-path="../guide/crc.html"><a href="../guide/crc.html">MAVLink CRC</a></li><li class="chapter"data-level="1.4.14"data-path="../guide/wireshark.html"><a href="../guide/wireshark.html">Debugging with Wireshark</a></li><li class="chapter"data-level="1.4.15"data-path="../messages/"><a href="../messages/">Dialects</a><ul class="articles"><li class="chapter"data-level="1.4.15.1"data-path="../messages/ASLUAV.html"><a href="../messages/ASLUAV.html">ASLUAV.xml</a></li><li class="chapter"data-level="1.4.15.2"data-path="../messages/all.html"><a href="../messages/all.html">all.xml</a></li><li class="chapter"data-level="1.4.15.3"data-path="../messages/ardupilotmega.html"><a href="../messages/ardupilotmega.html">ardupilotmega.xml</a></li><li class="chapter"data-level="1.4.15.4"data-path="../messages/autoquad.html"><a href="../messages/autoquad.html">autoquad.xml</a></li><li class="chapter"data-level="1.4.15.5"data-path="../messages/development.html"><a href="../messages/development.html">development.xml</a></li><li class="chapter"data-level="1.4.15.6"data-path="../messages/icarous.html"><a href="../messages/icarous.html">icarous.xml</a></li><li class="chapter"data-level="1.4.15.7"data-path="../messages/matrixpilot.html"><a href="../messages/matrixpilot.html">matrixpilot.xml</a></li><li class="chapter"data-level="1.4.15.8"data-path="../messages/minimal.html"><a href="../messages/minimal.html">minimal.xml</a></li><li class="chapter"data-level="1.4.15.9"data-path="../messages/paparazzi.html"><a href="../messages/paparazzi.html">paparazzi.xml</a></li><li class="chapter"data-level="1.4.15.10"data-path="../messages/python_array_test.html"><a href="../messages/python_array_test.html">python_array_test.xml</a></li><li class="chapter"data-level="1.4.15.11"data-path="../messages/standard.html"><a href="../messages/standard.html">standard.xml</a></li><li class="chapter"data-level="1.4.15.12"data-path="../messages/test.html"><a href="../messages/test.html">test.xml</a></li><li class="chapter"data-level="1.4.15.13"data-path="../messages/uAvionix.html"><a href="../messages/uAvionix.html">uAvionix.xml</a></li><li class="chapter"data-level="1.4.15.14"data-path="../messages/ualberta.html"><a href="../messages/ualberta.html">ualberta.xml</a></li></ul></li></ul></li><li class="chapter"data-level="1.5"data-path="../messages/common.html"><a href="../messages/common.html">메세지 (공통)</a></li><li class="chapter"data-level="1.6"data-path="./"><a href="./">Microservices</a><ul class="articles"><li class="chapter"data-level="1.6.1"data-path="heartbeat.html"><a href="heartbeat.html">주기 신호/연결 프로토콜</a></li><li class="chapter"data-level="1.6.2"data-path="mission.html"><a href="mission.html">미션 프로토콜</a></li><li class="chapter active"data-level="1.6.3"data-path="parameter.html"><a href="parameter.html">매개변수 프로토콜</a></li><li class="chapter"data-level="1.6.4"data-path="parameter_ext.html"><a href="parameter_ext.html">Extended Parameter Protocol</a></li><li class="chapter"data-level="1.6.5"data-path="command.html"><a href="command.html">Command Protocol</a></li><li class="chapter"data-level="1.6.6"data-path="manual_control.html"><a href="manual_control.html">Manual Control (Joystick) Protocol</a></li><li class="chapter"data-level="1.6.7"data-path="camera.html"><a href="camera.html">Camera Protocol</a><ul class="articles"><li class="chapter"data-level="1.6.7.1"data-path="camera_def.html"><a href="camera_def.html">Camera Definition</a></li></ul></li><li class="chapter"data-level="1.6.8"data-path="gimbal_v2.html"><a href="gimbal_v2.html">Gimbal Protocol v2</a><ul class="articles"><li class="chapter"data-level="1.6.8.1"data-path="gimbal.html"><a href="gimbal.html">Gimbal Protocol v1 (superseded)</a></li></ul></li><li class="chapter"data-level="1.6.9"data-path="arm_authorization.html"><a href="arm_authorization.html">Arm Authorization Protocol</a></li><li class="chapter"data-level="1.6.10"data-path="image_transmission.html"><a href="image_transmission.html">Image Transmission Protocol</a></li><li class="chapter"data-level="1.6.11"data-path="ftp.html"><a href="ftp.html">File Transfer Protocol (FTP)</a></li><li class="chapter"data-level="1.6.12"data-path="landing_target.html"><a href="landing_target.html">Landing Target Protocol</a></li><li class="chapter"data-level="1.6.13"data-path="ping.html"><a href="ping.html">Ping Protocol</a></li><li class="chapter"data-level="1.6.14"data-path="trajectory.html"><a href="trajectory.html">Path Planning (Trajectory) Protocol</a></li><li class="chapter"data-level="1.6.15"data-path="battery.html"><a href="battery.html">Battery Protocol</a></li><li class="chapter"data-level="1.6.16"data-path="terrain.html"><a href="terrain.html">Terrain Protocol</a></li><li class="chapter"data-level="1.6.17"data-path="tunnel.html"><a href="tunnel.html">Tunnel Protocol</a></li><li class="chapter"data-level="1.6.18"data-path="opendroneid.html"><a href="opendroneid.html">Open Drone ID Protocol (WIP)</a></li><li class="chapter"data-level="1.6.19"data-path="high_latency.html"><a href="high_latency.html">High Latency Protocol</a></li><li class="chapter"data-level="1.6.20"data-path="component_information.html"><a href="component_information.html">Component Information Protocol (WIP)</a></li><li class="chapter"data-level="1.6.21"data-path="payload.html"><a href="payload.html">Payload Protocols</a></li><li class="chapter"data-level="1.6.22"data-path="traffic_management.html"><a href="traffic_management.html">Traffic Managment (UTM/ADS-B)</a></li><li class="chapter"data-level="1.6.23"data-path="events.html"><a href="events.html">Events Interface (WIP)</a></li></ul></li><li class="chapter"data-level="1.7"data-path="../contributing/contributing.html"><a href="../contributing/contributing.html">Contributing</a></li><li class="chapter"data-level="1.8"data-path="../about/support.html"><a href="../about/support.html">지원</a></li><li class="divider"></li><li><a href="https://www.gitbook.com"class="gitbook-link"target="blank">GitBook에 게시</a></li></ul></nav></div><div class="book-body"><div class="body-inner"><div class="book-header"role="navigation"><h1><i class="fa fa-circle-o-notch fa-spin"></i> <a href="..">매개변수 프로토콜</a></h1></div><div class="page-wrapper"role="main"tabindex="-1"><div class="page-inner"><div id="book-search-results"><div class="search-noresults"><section class="markdown-section normal"><h1 id="parameter-protocol"><a href="#parameter-protocol"class="plugin-anchor"name="parameter-protocol"><i class="fa fa-link"aria-hidden="true"></i></a>Parameter Protocol</h1><p>The parameter microservice is used to exchange configuration settings between MAVLink components.</p><p>Each parameter is represented as a key/value pair. The key is usually the human-readable name of the parameter (maximum of 16 characters) and a value - which can be one of a <a href="../messages/common.html#MAV_PARAM_TYPE">number of types</a>.</p><p>The key/value pair has a number of important properties:</p><ul><li>The human-readable name is small but useful (it can encode parameter names from which users can infer the purpose of the parameter).</li><li>Unknown autopilots that implement the protocol can be supported &quot;out of the box&quot;.</li><li>A GCS does not <em>have</em> to know in advance what parameters exist on a remote system (although in practice a GCS can provide a <em>better</em> user experience with additional parameter metadata like maximum and minimum values, default values, etc.).</li><li>Adding a parameter only requires changes to the system with parameters. A GCS that loads the parameters, and the MAVLink communication libraries, should not require any changes.</li></ul><h2 id="messageenum-summary"><a href="#messageenum-summary"class="plugin-anchor"name="messageenum-summary"><i class="fa fa-link"aria-hidden="true"></i></a>Message/Enum Summary</h2><table><thead><tr><th>Message</th><th>Description</th></tr></thead><tbody><tr><td><span id="PARAM_REQUEST_LIST"></span><a href="../messages/common.html#PARAM_REQUEST_LIST">PARAM_REQUEST_LIST</a></td><td>Request all parameters. The recipient broadcast all parameter values using <a href="#PARAM_VALUE">PARAM_VALUE</a>.</td></tr><tr><td><span id="PARAM_REQUEST_READ"></span><a href="../messages/common.html#PARAM_REQUEST_READ">PARAM_REQUEST_READ</a></td><td>Request a single parameter. The recipient broadcasts the specified parameter value using <a href="#PARAM_VALUE">PARAM_VALUE</a>.</td></tr><tr><td><span id="PARAM_SET"></span><a href="../messages/common.html#PARAM_SET">PARAM_SET</a></td><td>Send command to set a specified parameter to a value. After the value has been set (whether successful or not), the recipient should broadcast the current value using <a href="#PARAM_VALUE">PARAM_VALUE</a>.</td></tr><tr><td><span id="PARAM_VALUE"></span><a href="../messages/common.html#PARAM_VALUE">PARAM_VALUE</a></td><td>The current value of a parameter, broadcast in response to a request to get one or more parameters (<a href="#PARAM_REQUEST_READ">PARAM_REQUEST_READ</a>, <a href="#PARAM_REQUEST_LIST">PARAM_REQUEST_LIST</a>) or whenever a parameter is set (<a href="#PARAM_SET">PARAM_SET</a>) or changes.</td></tr></tbody></table><table><thead><tr><th>Enum</th><th>Description</th></tr></thead><tbody><tr><td><span id="MAV_PARAM_TYPE"></span><a href="../messages/common.html#MAV_PARAM_TYPE">MAV_PARAM_TYPE</a></td><td><a href="#PARAM_SET">PARAM_SET</a> and <a href="#PARAM_VALUE">PARAM_VALUE</a> store/encode parameter values within a <code>float</code> field. This type conveys the real type of the encoded parameter value, e.g. <code>MAV_PARAM_TYPE_UINT16</code>, <code>MAV_PARAM_TYPE_INT32</code>, etc.</td></tr></tbody></table><h2 id="parameter-encoding"><a href="#parameter-encoding"class="plugin-anchor"name="parameter-encoding"><i class="fa fa-link"aria-hidden="true"></i></a>Parameter Encoding</h2><p>Parameters names/ids are set in the <code>param_id</code> field of messages where they are used. The <code>param_id</code> string can store up to 16 characters. The string is terminated with a NULL (<code>\0</code>) character if there are less than 16 human-readable chars, and without a null termination byte if the length is exactly 16 chars.</p><p>Values are byte-wise encoded <em>within</em> the <code>param_value</code> field, an IEE754 single-precision, 4 byte, floating point value. The <code>param_type</code> (<a href="../messages/common.html#MAV_PARAM_TYPE">MAV_PARAM_TYPE</a>) is used to indicate the actual type of the data so that it can be decoded by the recipient. Supported types are: 8, 16, 32 and 64-bit signed and unsigned integers, and 32 and 64-bit floating point numbers.</p><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p>A byte-wise conversion is needed, rather than a simple cast, to enable larger integers to be exchanged (e.g. 1E7 scaled integers can be useful for encoding some types of data, but lose precision if cast directly to floats).</p></blockquote><h3 id="mavgen-c-api"><a href="#mavgen-c-api"class="plugin-anchor"name="mavgen-c-api"><i class="fa fa-link"aria-hidden="true"></i></a>Mavgen C API</h3><p>The C API provides a convenient <code>union</code> that allows you to bytewise convert between any of the supported types: <code>mavlink_param_union_t</code> (<a href="https://github.com/mavlink/c_library_v2/blob/master/mavlink_types.h"target="_blank">mavlink_types.h</a>). For example, below we shown how you can set the union integer field but pass the float value to the sending function:</p><pre><code class="lang-c"><span class="hljs-keyword">mavlink_param_union_t</span> param;
<span class="hljs-keyword">int32_t</span> integer = <span class="hljs-number">20000</span>;
param.param_int32 = integer;
param.type = MAV_PARAM_TYPE_INT32;

<span class="hljs-comment">// Then send the param by providing the float bytes to the send function</span>
mavlink_msg_param_set_send(xxx, xxx, param.param_float, param.type, xxx);
</code></pre><h3 id="mavgen-python-api-pymavlink"><a href="#mavgen-python-api-pymavlink"class="plugin-anchor"name="mavgen-python-api-pymavlink"><i class="fa fa-link"aria-hidden="true"></i></a>Mavgen Python API (Pymavlink)</h3><p>Pymavlink does not include special support to byte-wise encode the non-float data types (unsurprisingly, because Python effectively &quot;hides&quot; low level data types from users). When working with a system that supports non-float parameters (e.g. PX4) you will need to do the encoding/decoding yourself when sending and receiving messages.</p><p>There is a good example of how to do this in the Pymavlink <a href="https://github.com/ArduPilot/pymavlink/blob/master/mavparm.py"target="_blank">mavparm.py</a> module (see <code>MAVParmDict.mavset()</code>).</p><h2 id="parameter_caching"><a href="#parameter_caching"class="plugin-anchor"name="parameter_caching"><i class="fa fa-link"aria-hidden="true"></i></a>Parameter Caching</h2><p>A GCS or other component may choose to maintain a cache of parameter values for connected components/systems, in order to reduce the time required to display values and reduce MAVLink traffic.</p><p>The cache can be populated initially by first <a href="#read_all">reading the full parameter list</a> at least once, and then updated by monitoring for <a href="../messages/common.html#PARAM_VALUE">PARAM_VALUE</a> messages (which are emitted whenever a parameter is <a href="#write">written</a> or otherwise changed).</p><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p>Cache synchronisation is not guaranteed; a component may <a href="#monitoring_unreliable">miss update messages</a> due to parameter changes by other components.</p></blockquote><h2 id="multi-system-and-multi-component-support"><a href="#multi-system-and-multi-component-support"class="plugin-anchor"name="multi-system-and-multi-component-support"><i class="fa fa-link"aria-hidden="true"></i></a>Multi-System and Multi-Component Support</h2><p>MAVLink supports multiple systems in parallel on the same link, and multiple MAVLink enabled components within a system.</p><p>Requests to get and set parameters can be sent to individual systems or components. To get a complete parameter list from a system, send the request parameter message with <code>target_component</code> set to <a href="../messages/common.html#MAV_COMP_ID_ALL">MAV_COMP_ID_ALL</a>.</p><p>All components must respond to parameter request messages addressed to their ID or the ID <code>MAV_COMP_ID_ALL</code>.</p><blockquote class="alert clearfix alert-success"><strong class="fa fa-2x fa-thumbs-o-up"></strong><p><em>QGroundControl</em> by default queries all components of the currently connected system (it sends ID <code>MAV_COMP_ID_ALL</code>).</p></blockquote><h2 id="limitations"><a href="#limitations"class="plugin-anchor"name="limitations"><i class="fa fa-link"aria-hidden="true"></i></a>Limitations</h2><h3 id="parameters_invariant"><a href="#parameters_invariant"class="plugin-anchor"name="parameters_invariant"><i class="fa fa-link"aria-hidden="true"></i></a>Parameters Table is Invariant</h3><p>The protocol <em>requires</em> that the parameter set does not change during normal operation/after parameters have been read.</p><p>If a component can add parameters during (or after) initial synchronization the protocol cannot guarantee reliable/robust synchronization, because there is no way to notify that the parameter set has changed and a new sync is required.</p><p>If working with a non-compliant component, the risk of problems when working with parameters can be <em>reduced</em> (but not removed) if:</p><ul><li>The <code>param_id</code> is used to read parameters where possible (the mapping of <code>param_index</code> to a particular parameter might change on systems where parameters can be added/removed).</li><li><a href="../messages/common.html#PARAM_VALUE">PARAM_VALUE.param_count</a> is monitored and the parameter set re-sychronised on change.</li></ul><h3 id="monitoring_unreliable"><a href="#monitoring_unreliable"class="plugin-anchor"name="monitoring_unreliable"><i class="fa fa-link"aria-hidden="true"></i></a>Parameter Synchronisation Can Fail</h3><p>A GCS (or other component) that wants to <a href="#parameter_caching">cache parameters</a> with a component and keep them synchronised, should first get all parameters, and then track any new parameter changes by monitoring for <code>PARAM_VALUE</code> messages (updating their internal list appropriately).</p><p>This works for the originator of a parameter change, which can resend the request if an expected <code>PARAM_VALUE</code> is not recieved. This approach may fail for components that did not originate the change, as they will not know about updates they do not receive (i.e. if messages are dropped).</p><p>A component may mitigate this risk by, for example, sending the <code>PARAM_VALUE</code> multiple times after a parameter is changed.</p><h2 id="parameter-operations"><a href="#parameter-operations"class="plugin-anchor"name="parameter-operations"><i class="fa fa-link"aria-hidden="true"></i></a>Parameter Operations</h2><p>This section defines the state machine/message sequences for all parameter operations.</p><h3 id="read_all"><a href="#read_all"class="plugin-anchor"name="read_all"><i class="fa fa-link"aria-hidden="true"></i></a>Read All Parameters</h3><p>The read-all operation is started by sending the <a href="../messages/common.html#PARAM_REQUEST_LIST">PARAM_REQUEST_LIST</a> message. The target component must start to broadcast the parameters individually in <code>PARAM_VALUE</code> messages after receiving this message. The drone should allow a pause after sending each parameter to ensure that the operation doesn&apos;t consume all of the available link bandwidth (30 - 50 percent of the bandwidth is reasonable).</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IERyb25lXG4gICAgR0NTLT4-RHJvbmU6IFBBUkFNX1JFUVVFU1RfTElTVFxuICAgIEdDUy0tPj5HQ1M6IFN0YXJ0IHJlY2VpdmUgdGltZW91dCAoYW55IHBhcmFtcylcbiAgICBEcm9uZS0-PkdDUzogU2VuZCBOIHBhcmFtZXRlcnMgd2l0aCBQQVJBTV9WQUxVRVxuICAgIEdDUy0tPj5HQ1M6IFN0YXJ0IHJlY2VpdmUgdGltZW91dCAoYWZ0ZXIgZWFjaCBwYXJhbSlcbiAgICBOb3RlIG92ZXIgR0NTOiBGaW5pc2gvdGltZW91dCB3aGVuIG5vIG1vcmUgcGFyYW1zIHJlY2VpdmVkIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"target="_blank"><img alt="Mermaid sequence: Read all parameters"src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IERyb25lXG4gICAgR0NTLT4-RHJvbmU6IFBBUkFNX1JFUVVFU1RfTElTVFxuICAgIEdDUy0tPj5HQ1M6IFN0YXJ0IHJlY2VpdmUgdGltZW91dCAoYW55IHBhcmFtcylcbiAgICBEcm9uZS0-PkdDUzogU2VuZCBOIHBhcmFtZXRlcnMgd2l0aCBQQVJBTV9WQUxVRVxuICAgIEdDUy0tPj5HQ1M6IFN0YXJ0IHJlY2VpdmUgdGltZW91dCAoYWZ0ZXIgZWFjaCBwYXJhbSlcbiAgICBOb3RlIG92ZXIgR0NTOiBGaW5pc2gvdGltZW91dCB3aGVuIG5vIG1vcmUgcGFyYW1zIHJlY2VpdmVkIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"></a></p><p>The sequence of operations is:</p><ol><li>GCS (client) sends <a href="../messages/common.html#PARAM_REQUEST_LIST">PARAM_REQUEST_LIST</a> specifying a target system/component.<ul><li>Broadcast addresses may be used. All targeted components should respond with parameters (or ignore the request if they have none).</li><li>The GCS is expected to accumulate parameters from all responding systems.</li><li>The timeout/retry behaviour is GSC dependent.</li></ul></li><li>The targeted component(s) should respond, sending all parameters individually in <a href="../messages/common.html#PARAM_VALUE">PARAM_VALUE</a> messages.<ul><li>Allow breaks between each message in order to avoid saturating the link.</li><li>Components with no parameters should ignore the request.</li></ul></li><li>GCS starts timeout after each <code>PARAM_VALUE</code> message in order to detect when parameters are no longer being sent (that the operation has completed).</li></ol><p>Notes:</p><ul><li>The GCS/API may accumulate the received parameters for each component and can determine if any are missing/not received (<code>PARAM_VALUE</code> contains the total number of params and index of current param).</li><li>Handling of missing params is GCS-dependent. <em>QGroundControl</em>, for example, <a href="#read_single">individually requests</a> each missing parameter by index.</li><li>If a component does not any parameters then it will ignore a <code>PARAM_REQUEST_LIST</code> request. The sender should simply timeout (after resends) if no <code>PARAM_VALUE</code> is received.</li></ul><h3 id="read_single"><a href="#read_single"class="plugin-anchor"name="read_single"><i class="fa fa-link"aria-hidden="true"></i></a>Read Single Parameter</h3><p>A single parameter can be read by sending the <a href="../messages/common.html#PARAM_REQUEST_READ">PARAM_REQUEST_READ</a> message, as shown below:</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IERyb25lXG4gICAgR0NTLT4-RHJvbmU6IFBBUkFNX1JFUVVFU1RfUkVBRFxuICAgIEdDUy0-PkdDUzogU3RhcnQgcmVjZWl2ZSB0aW1lb3V0XG4gICAgRHJvbmUtPj5HQ1M6IFBBUkFNX1ZBTFVFXG4gICAgR0NTLS0-PkRyb25lOiBSZS1yZXF1ZXN0IHBhcmFtZXRlciB2YWx1ZSBvbiB0aW1lb3V0IiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"target="_blank"><img alt="Mermaid sequence: Read single parameter"src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IERyb25lXG4gICAgR0NTLT4-RHJvbmU6IFBBUkFNX1JFUVVFU1RfUkVBRFxuICAgIEdDUy0-PkdDUzogU3RhcnQgcmVjZWl2ZSB0aW1lb3V0XG4gICAgRHJvbmUtPj5HQ1M6IFBBUkFNX1ZBTFVFXG4gICAgR0NTLS0-PkRyb25lOiBSZS1yZXF1ZXN0IHBhcmFtZXRlciB2YWx1ZSBvbiB0aW1lb3V0IiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"></a></p><p>The sequence of operations is:</p><ol><li>GCS (client) sends <a href="../messages/common.html#PARAM_REQUEST_READ">PARAM_REQUEST_READ</a> specifying either the parameter id (name) or parameter index.</li><li>GCS starts timeout waiting for acknowledgment (in the form of a <a href="../messages/common.html#PARAM_VALUE">PARAM_VALUE</a> message).</li><li>Drone responds with <code>PARAM_VALUE</code> containing the parameter value. This is a broadcast message (sent to all systems).</li></ol><p>The drone may restart the sequence if the <code>PARAM_VALUE</code> acknowledgment is not received within the timeout.</p><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p>There is no formal way for the drone to signal when an invalid parameter is requested (i.e. for a parameter name or id that does not exist). In this case the drone <em>should</em> emit <a href="../messages/common.html#STATUS_TEXT">STATUS_TEXT</a>. The GCS may monitor for the specific notification, but will otherwise fail the request after any timeout/resend cycle completes.</p></blockquote><h3 id="write"><a href="#write"class="plugin-anchor"name="write"><i class="fa fa-link"aria-hidden="true"></i></a>Write Parameters</h3><p>Parameters can be written individually by sending the parameter name and value pair to the GCS, as shown:</p><p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IERyb25lXG4gICAgR0NTLT4-RHJvbmU6IFBBUkFNX1NFVCAocGFyYW0gbmFtZSwgdmFsdWUsIC4uLilcbiAgICBHQ1MtPj5HQ1M6IFN0YXJ0IHRpbWVvdXQgKGZvciBQQVJBTV9WQUxVRSlcbiAgICBEcm9uZS0-PkRyb25lOiBXcml0ZSBwYXJhbWV0ZXIgdmFsdWVcbiAgICBEcm9uZS0-PkdDUzogUEFSQU1fVkFMVUUgKG5hbWUsIHZhbHVlIC4uLilcbiAgICBHQ1MtPj5HQ1M6IChvcHRpb25hbCkgVXBkYXRlIGNhY2hlIGZvciBQQVJBTV9WQUxVRVxuICAgIEdDUy0tPj5Ecm9uZTogT24gdGltZW91dCByZXN0YXJ0IHRoaXMgc2VxdWVuY2UiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"target="_blank"><img alt="Mermaid Sequence: Write parameters"src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtO1xuICAgIHBhcnRpY2lwYW50IEdDU1xuICAgIHBhcnRpY2lwYW50IERyb25lXG4gICAgR0NTLT4-RHJvbmU6IFBBUkFNX1NFVCAocGFyYW0gbmFtZSwgdmFsdWUsIC4uLilcbiAgICBHQ1MtPj5HQ1M6IFN0YXJ0IHRpbWVvdXQgKGZvciBQQVJBTV9WQUxVRSlcbiAgICBEcm9uZS0-PkRyb25lOiBXcml0ZSBwYXJhbWV0ZXIgdmFsdWVcbiAgICBEcm9uZS0-PkdDUzogUEFSQU1fVkFMVUUgKG5hbWUsIHZhbHVlIC4uLilcbiAgICBHQ1MtPj5HQ1M6IChvcHRpb25hbCkgVXBkYXRlIGNhY2hlIGZvciBQQVJBTV9WQUxVRVxuICAgIEdDUy0tPj5Ecm9uZTogT24gdGltZW91dCByZXN0YXJ0IHRoaXMgc2VxdWVuY2UiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ"></a></p><p>The sequence of operations is:</p><ol><li>GCS (client) sends <a href="../messages/common.html#PARAM_VALUE">PARAM_SET</a> specifying the param name to update and its new value (also target system/component and the param type).</li><li>GCS starts timout waiting for acknowledgment (in the form of a <a href="../messages/common.html#PARAM_VALUE">PARAM_VALUE</a> message).</li><li>Drone writes parameter and responds by <em>broadcasting</em> a <code>PARAM_VALUE</code> containing the updated parameter value to all components/systems. &gt; <strong>Note</strong> The Drone must acknowledge the <code>PARAM_SET</code> by broadcasting a <code>PARAM_VALUE</code> even if the write operation fails. In this case the <code>PARAM_VALUE</code> will be the current/unchanged parameter value.</li><li>GCS should update the <a href="#parameter_caching">parameter cache</a> (if used) with the new value.</li><li>The GCS may restart the sequence if the expected <code>PARAM_VALUE</code> is not received within the timeout, or if the write operation fails (the value returned in <code>PARAM_VALUE</code> does not match the value set).</li></ol><blockquote class="alert clearfix alert-info"><strong class="fa fa-2x fa-edit"></strong><p>The command <a href="../messages/common.html#MAV_CMD_DO_SET_PARAMETER">MAV_CMD_DO_SET_PARAMETER</a> is not part of the parameter protocol. If implemented it can be used to set the value of a parameter using the <em>enumeration</em> of the parameter within the remote system is known (rather than the id). This has no particular advantage over the parameter protocol methods.</p></blockquote><h2 id="implementations"><a href="#implementations"class="plugin-anchor"name="implementations"><i class="fa fa-link"aria-hidden="true"></i></a>Implementations</h2><h3 id="px4"><a href="#px4"class="plugin-anchor"name="px4"><i class="fa fa-link"aria-hidden="true"></i></a>PX4</h3><p>PX4 implements the protocol in a way that is compatible with this specification. Only float and Int32 parameters are used.</p><p>PX4 additionally provides a mechanism that allows a GCS to <em>cache</em> parameters, which significantly reduces ready-to-use time for the GCS if parameters have not been changed since the previous parameter sync. The way that this mechanism works is that when the list of parameters is requested, PX4 first sends a <code>PARAM_VALUE</code> with the <code>param_index</code> of <code>INT16_MAX</code> (in code, referred to as <code>PARAM_HASH</code>) containing a <em>hash</em> of the parameter set.</p><p>This hash is calculated by computing the <a href="../guide/crc.html">MAVLink CRC32</a> over all param names and values (see the <code>param_hash_check()</code> in source <a href="https://github.com/PX4/Firmware/blob/v1.9.0-alpha/src/lib/parameters/parameters.cpp#L1329"target="_blank">here</a>). If the GCS has a matching hash value it can immediately start using its cached parameters (rather than having to wait while all the rest of the parameters upload).</p><p>Source files:</p><ul><li><a href="https://github.com/PX4/Firmware/blob/master/src/modules/mavlink/mavlink_parameters.cpp"target="_blank">src/modules/mavlink/mavlink_parameters.cpp</a></li><li><a href="https://github.com/PX4/Firmware/blob/master/src/modules/mavlink/mavlink_parameters.h"target="_blank">src/modules/mavlink/mavlink_parameters.h</a></li></ul><h3 id="ardupilot"><a href="#ardupilot"class="plugin-anchor"name="ardupilot"><i class="fa fa-link"aria-hidden="true"></i></a>ArduPilot</h3><p>ArduPilot implements an incompatible version of this protocol.</p><p>The implementation uses the same message types and workflow. The main difference is that ArduPilot encodes data within parameter message value fields (floats) using a normal C cast rather than a byte-wise copy (and expects incoming messages to use the same encoding). This can result in significant rounding errors.</p><p>Other known differences are:</p><ul><li>Parameter sets can be enabled/disabled during operation. This can invalidate the set of synchronized parameters and make access to parameters by index unreliable.</li><li><code>PARAM_SET</code><ul><li><code>param_type</code> in the message is ignored. The data type is obtained by checking stored type info (via name lookup).</li><li>The data type is used to constrain and round the received value before it is stored (as a float).</li><li>A <code>PARAM_VALUE</code> is not emitted after the parameter update with the new value (or the old value if update failed).</li></ul></li></ul><p>Source files:</p><ul><li><a href="https://github.com/ArduPilot/ardupilot/blob/master/libraries/GCS_MAVLink/GCS_Param.cpp"target="_blank">libraries/GCS_MAVLink/GCS_Param.cpp</a></li><li><a href="https://github.com/ArduPilot/ardupilot/blob/master/libraries/AP_Param/AP_Param.cpp"target="_blank">libraries/AP_Param/AP_Param.cpp</a></li></ul><h3 id="qgroundcontrol"><a href="#qgroundcontrol"class="plugin-anchor"name="qgroundcontrol"><i class="fa fa-link"aria-hidden="true"></i></a>QGroundControl</h3><p><em>QGroundControl</em> implements this protocol, and works with both ArduPilot and PX4.</p><p>Source files:</p><ul><li><a href="https://github.com/mavlink/qgroundcontrol/blob/master/src/FactSystem/ParameterManager.cc"target="_blank">src/FactSystem/ParameterManager.cc</a></li></ul></section></div><div class="search-results"><div class="has-results"><h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1><ul class="search-results-list"></ul></div><div class="no-results"><h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1></div></div></div></div></div></div></div><script>var gitbook=gitbook||[];gitbook.push(function(){gitbook.page.hasChanged({page:{title:"매개변수 프로토콜",level:"1.6.3",depth:2,next:{title:"Extended Parameter Protocol",level:"1.6.4",depth:2,path:"services/parameter_ext.md",ref:"services/parameter_ext.md",articles:[]},previous:{title:"미션 프로토콜",level:"1.6.2",depth:2,path:"services/mission.md",ref:"services/mission.md",articles:[]},dir:"ltr"},config:{plugins:["theme-api","youtube","anchors","collapsible-menu","page-toc-button","language-picker","custom-favicon","richquotes@git+https://github.com/Dronecode/gitbook-plugin-richquotes.git","bulk-redirect@git+https://github.com/Dronecode/gitbook-plugin-bulk-redirect.git","toolbar@git+https://github.com/hamishwillee/gitbook-plugin-toolbar.git","-mermaid","theme-dronecode@git+https://github.com/dronecode/theme-dronecode.git","html-minifier"],styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},pluginsConfig:{"theme-dronecode":{logo:{logo_large:"../assets/site/logo_mavlink_header.png",logo_small:"../assets/site/logo_mavlink_header.png",url:"https://mavlink.io/en/"},menu:[{url:"https://mavlink.io/en/messages/common.html",text:"Messages",text_small:"Messages"},{url:"https://mavlink.io/en/about/faq.html",text:"FAQ",text_small:"FAQ"},{url:"https://mavlink.io/en/about/implementations.html",text:"Implementations",text_small:"Implementations"},{url:"https://mavlink.io/en/mavgen_c/examples.html",text:"Examples",text_small:"Examples"},{url:"https://mavlink.io/en/about/support.html",text:"Support",text_small:"Help"}]},"collapsible-menu":{},"language-picker":{"grid-columns":3},youtube:{},search:{},"html-minifier":{customAttrSurround:[],removeScriptTypeAttributes:!1,removeEmptyAttributes:!1,removeRedundantAttributes:!1,removeEmptyElements:!1,sortClassName:!0,caseSensitive:!0,html5:!0,collapseWhitespace:!0,processConditionalComments:!1,quoteCharacter:null,keepClosingSlash:!0,preventAttributesEscaping:!1,minifyURLs:!1,removeAttributeQuotes:!1,decodeEntities:!1,trimCustomFragments:!1,customAttrAssign:[],includeAutoGeneratedTags:!0,collapseInlineTagWhitespace:!1,collapseBooleanAttributes:!0,minifyJS:!0,removeTagWhitespace:!0,preserveLineBreaks:!1,sortAttributes:!0,removeStyleLinkTypeAttributes:!1,removeComments:!0,minifyCSS:!0,processScripts:[],conservativeCollapse:!1,removeOptionalTags:!1,useShortDoctype:!1},lunr:{maxIndexSize:1e6,ignoreSpecialCharacters:!1},fontsettings:{theme:"white",family:"sans",size:2},richquotes:{tip:{alert:"success",picto:"fa-thumbs-o-up"}},highlight:{},favicon:"favicon.ico","page-toc-button":{},"theme-api":{languages:[{lang:"c",name:"C/C++",default:!0},{lang:"python",name:"Python"},{lang:"js",name:"JavaScript"},{lang:"go",name:"Go"}],split:!0,theme:"light"},"bulk-redirect":{basepath:"/",redirectsFile:"redirects.json"},"custom-favicon":{},toolbar:{buttons:[{label:"Bug tracker",icon:"fa fa-bug",position:"left",url:"https://github.com/mavlink/mavlink-devguide/issues/new?title=Doc+Bug:+{{title}}&body=DESCRIBE+PROBLEM+WITH+DOCS+HERE%0A%0ABug+Page:+[{{title}}]({{url}})"},{label:"GitHub",icon:"fa fa-github",url:"https://github.com/mavlink/mavlink-devguide"},{label:"Edit page on github",icon:"fa fa-pencil-square-o",position:"left",url:"https://github.com/mavlink/mavlink-devguide/edit/master/{{filepath_lang}}"}]},sharing:{facebook:!0,twitter:!0,google:!1,weibo:!1,instapaper:!1,vk:!1,all:["facebook","google","twitter","weibo","instapaper"]},"theme-default":{styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},showLevel:!1},anchors:{}},theme:"default",pdf:{pageNumbers:!0,fontSize:12,fontFamily:"Arial",paperSize:"a4",chapterMark:"pagebreak",pageBreaksBefore:"/",margin:{right:62,left:62,top:56,bottom:56}},structure:{langs:"LANGS.md",readme:"README.md",glossary:"GLOSSARY.md",summary:"SUMMARY.md"},variables:{logo:"./assets/site/logo_mavlink_small.png"},title:"MAVLink Developer Guide",language:"ko",gitbook:"*"},file:{path:"services/parameter.md",mtime:"2022-01-04T22:48:36.350Z",type:"markdown"},gitbook:{version:"3.2.3",time:"2022-01-04T22:49:17.913Z"},basePath:"..",book:{language:"ko"}})})</script></div><script src="../../gitbook/gitbook.js"></script><script src="../../gitbook/theme.js"></script><script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script><script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script><script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script><script src="../../gitbook/gitbook-plugin-toolbar/buttons.js"></script><script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script><script src="../../gitbook/gitbook-plugin-search/search.js"></script><script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script><script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script><script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script><script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script><script src="../../gitbook/gitbook-plugin-theme-api/theme-api.js"></script></body></html>