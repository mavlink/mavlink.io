import{_ as o,c as r,a8 as a,j as e,a as s,o as n}from"./chunks/framework.CnRC9NRC.js";const p=JSON.parse('{"title":"Battery Protocol","description":"","frontmatter":{},"headers":[],"relativePath":"zh/services/battery.md","filePath":"zh/services/battery.md"}'),i={name:"zh/services/battery.md"};function d(m,t,l,c,h,T){return n(),r("div",null,t[0]||(t[0]=[a('<h1 id="battery-protocol" tabindex="-1">Battery Protocol <a class="header-anchor" href="#battery-protocol" aria-label="Permalink to &quot;Battery Protocol&quot;">​</a></h1><p>MAVLink provides a number of messages for providing battery information:</p><ul><li><p><a href="#BATTERY_STATUS">BATTERY_STATUS</a>: Battery status information that changes regularly:</p><ul><li><p>Emitted for both &quot;dumb&quot; and &quot;smart&quot; batteries at around 0.5 Hz (for each battery).</p></li><li><p>Some batteries may provide <a href="#MAV_BATTERY_FAULT">fault</a> and <a href="#MAV_BATTERY_MODE">mode</a> information in this message.</p></li></ul><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p><code>BATTERY_STATUS</code> is expected to be superseded by <a href="./../messages/development.html#BATTERY_STATUS_V2">BATTERY_STATUS_V2</a>.&gt; For more information see <a href="https://github.com/mavlink/rfcs/pull/19" target="_blank" rel="noreferrer">RFC 0018 - Improved Battery Status Reporting</a>.</p></div></li><li><p><a href="#BATTERY_INFO">BATTERY_INFO</a>: Battery information that changes rarely, if ever (e.g. device name):</p><ul><li>Emit on connection and/or when requested using <a href="./../messages/common.html#MAV_CMD_REQUEST_MESSAGE">MAV_CMD_REQUEST_MESSAGE</a>.</li></ul></li></ul><p>The messages should be sent individually for each battery in the system (the messages have an instance <code>id</code> field that is used to identify the corresponding battery). It is up to the GCS to provide an appropriate mechanism that allows the user to assess the aggregate battery status on systems that have multiple batteries.</p>',4),e("div",{class:"note custom-block github-alert"},[e("p",{class:"custom-block-title"},"NOTE"),e("p",null,[s('There is no standardized mechanism to report the "aggregate" battery state on a multi-battery system. '),e("strong",{"x-id":"1"},"Note"),s(' There is no standardized mechanism to report the "aggregate" battery state on a multi-battery system. A GCS is expected to provide enough information from the individual battery reports to allow a user to make a reasonable assessment of vehicle battery status.')])],-1),a('<h2 id="message-enum-summary" tabindex="-1">Message/Enum Summary <a class="header-anchor" href="#message-enum-summary" aria-label="Permalink to &quot;Message/Enum Summary&quot;">​</a></h2><table tabindex="0"><thead><tr><th>消息</th><th>描述</th></tr></thead><tbody><tr><td><span id="BATTERY_STATUS"></span><a href="./../messages/common.html#BATTERY_STATUS">BATTERY_STATUS</a></td><td>Battery message used for frequent status update - e.g. of current capacity, voltages, faults, etc.</td></tr><tr><td><span id="BATTERY_INFO"></span><a href="./../messages/common.html#BATTERY_INFO">BATTERY_INFO</a> (WIP)</td><td>Smart battery message used for invariant or infrequently changing data - e.g. battery name, battery full/empty capacity and voltages etc.</td></tr></tbody></table><table tabindex="0"><thead><tr><th>Enum</th><th>描述</th></tr></thead><tbody><tr><td><span id="MAV_BATTERY_FAULT"></span><a href="./../messages/common.html#MAV_BATTERY_FAULT">MAV_BATTERY_FAULT</a></td><td>Fault/health indications.</td></tr><tr><td><span id="MAV_BATTERY_MODE"></span><a href="./../messages/common.html#MAV_BATTERY_MODE">MAV_BATTERY_MODE</a></td><td>Smart battery mode.</td></tr></tbody></table><h2 id="battery-components" tabindex="-1">Battery Components <a class="header-anchor" href="#battery-components" aria-label="Permalink to &quot;Battery Components&quot;">​</a></h2><p>Batteries that are connected to a flight controller via <strong>a non-MAVLink bus</strong> are treated as part of the flight controller component. Specifically, the battery messages are emitted with the autopilot system and component ids, and the <code>MAV_TYPE</code> for the type of vehicle.</p><p>Smart batteries that are distinct components on the MAVLink network must:</p><ul><li>emit a <a href="./../messages/common.html#HEARTBEAT">HEARTBEAT</a> with <code>HEARTBEAT.type</code>=<a href="./../messages/common.html#MAV_TYPE_BATTERY">MAV_TYPE_BATTERY</a> -have a unique component ID within the MAVLink system. <a href="./../messages/common.html#MAV_COMP_ID_BATTERY">MAV_COMP_ID_BATTERY</a> and <a href="./../messages/common.html#MAV_COMP_ID_BATTERY2">MAV_COMP_ID_BATTERY2</a> should be used by default for the first two battery instances. Subsequent instances can use any spare/unused ID.</li></ul><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>Ground stations (and other components) that are interested in battery messages should differentiate batteries based on <code>BATTERY_STATUS.id</code>/<code>BATTERY_INFO.id</code>.</p></div><h2 id="a-note-on-sys-status" tabindex="-1">A Note on SYS_STATUS <a class="header-anchor" href="#a-note-on-sys-status" aria-label="Permalink to &quot;A Note on SYS_STATUS&quot;">​</a></h2><p><a href="./../messages/common.html#SYS_STATUS">SYS_STATUS</a> contains three battery information fields: <code>voltage_battery</code>, <code>current_battery</code>, <code>battery_remaining</code>.</p><p>On a single-battery system these usually provide the same information as the <code>BATTERY_STATUS</code> message.</p><p>On multi-battery systems the values are not standardised, and depend on the flight stack and/or flight stack configuration. For example, a system may report the same information as the first <code>BATTERY_STATUS</code>, allow the user to configure which battery is reported (i.e. with a parameter), report the battery with the lowest remaining capacity.</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>GCS should not rely on the value of <code>SYS_STATUS</code>. However it cannot be removed because it is used for battery reporting on many legacy systems (e.g. On-screen displays).</p></div>',13)]))}const b=o(i,[["render",d]]);export{p as __pageData,b as default};
